{% load static %}

<article class="event-card flex items-stretch w-full max-w-2xl transition-all duration-300 h-[250px]">
  
  <!-- Left side (Image) -->
  <div class="w-2/5 relative">
    {% if event.thumbnail %}
      <img src="{{ event.thumbnail }}" alt="{{ event.name }}" class="object-cover w-full h-full">
    {% else %}
      <img src="{% static 'images/thumbnail-default.jpg' %}" alt="No Image Available" class="object-cover w-full h-full opacity-80">
    {% endif %}

    {% if event.sports_category %}
      <span class="absolute top-3 left-3 text-white text-xs px-3 py-1 rounded-full shadow-[0_3px_8px_rgba(0,0,0,0.04)] bg-[var(--color-main-400)]">
        {{ event.get_sports_category_display }}
      </span>
    {% endif %}

    {% if event.activity_category %}
      <span class="absolute top-10 left-3 text-[var(--color-main-400)] text-xs px-3 py-1 rounded-full shadow-[0_3px_8px_rgba(0,0,0,0.04)] bg-[var(--color-main-50)]">
        {{ event.get_activity_category_display }}
      </span>
    {% endif %}
  </div>

  <!-- RIGHT CONTENT -->
  <div class="w-3/5 p-6 flex flex-col justify-between relative">

    <!-- TOP TEXT -->
    <div>
      <h3 class="text-lg font-bold text-[var(--color-text-500)] leading-tight mb-1 line-clamp-2">
        {{ event.name }}
      </h3>

      <p class="text-sm text-[var(--color-text-400)] mb-1">
        {{ event.start_time|date:"M j, Y" }} • {{ event.start_time|date:"H:i" }}
      </p>

      <p class="text-sm text-[var(--color-text-400)] mb-2 line-clamp-1">
        {{ event.location }}
      </p>

      <!-- DESCRIPTION AUTO TRUNCATE -->
      <p class="text-[var(--color-text-300)] text-sm leading-snug line-clamp-2">
        {{ event.description }}
      </p>
    </div>


    <!-- BOTTOM BUTTONS -->
    <div class="flex justify-between items-center mt-3">
      <a href="{% url 'Event:event_detail' event.id %}"
         class="btn btn-gradient px-4 py-2 text-sm shadow-[0_3px_8px_rgba(0,0,0,0.04)] hover:shadow-[0_4px_10px_rgba(0,0,0,0.06)]">
        Details →
      </a>
      
      <button 
        class="bookmark-btn group relative {% if event.id in bookmarked_ids %}active{% endif %} hover:shadow-[0_4px_10px_rgba(0,0,0,0.06)]"
        data-event-id="{{ event.id }}"
        aria-label="Bookmark event"
      >
        <div class="bookmark-bg"></div>

        {% if event.id in bookmarked_ids %}
          <img src="{% static 'icons/bookmark-toggle.png' %}" alt="Bookmarked" class="bookmark-icon" />
        {% else %}
          <img src="{% static 'icons/bookmark-default.png' %}" alt="Bookmark icon" class="bookmark-icon" />
        {% endif %}

      </button>

    </div>
  </div>

</article>
