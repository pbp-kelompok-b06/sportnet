<div class="border-l-2 border-[var(--color-main-200)] pl-4 mt-3">
  <div class="bg-[var(--color-main-50)] p-3 rounded-lg shadow-sm">
    <p class="font-semibold text-[var(--color-main-700)] flex items-center gap-2 flex-wrap">
      {% if post.organizer %}
        {{ post.organizer.organizer_name }}
        <span class="text-xs bg-[var(--color-main-100)] text-[var(--color-main-700)] px-2 py-0.5 rounded-full font-medium">
          Organizer
        </span>
      {% elif post.participant %}
        {{ post.participant.full_name }}
      {% else %}
        <span class="text-gray-500 italic">Unknown User</span>
      {% endif %}
      <span class="text-sm text-gray-500 ml-1">â€¢ {{ post.created_at|timesince }} ago</span>
    </p>
    <p class="text-gray-800 mt-2">{{ post.content }}</p>
    <a href="javascript:void(0)" onclick="toggleReply({{ post.id }})"
       class="text-sm text-[var(--color-main-500)] hover:underline">Reply</a>
  </div>

  <div id="reply-form-{{ post.id }}" class="ml-4 mt-2 hidden">
    <form method="POST" action="{% url 'Forum:forum_page' event.id %}">
      {% csrf_token %}
      <input type="hidden" name="parent_id" value="{{ post.id }}">
      {{ form.as_p }}
      <button type="submit" class="btn btn-gradient mt-1">Send Reply</button>
    </form>
  </div>

  {% for reply in post.replies.all %}
    {% include "forum/_post_comment.html" with post=reply form=form %}
  {% endfor %}
</div>

<script>
  function toggleReply(id) {
    const el = document.getElementById(`reply-form-${id}`);
    if (el) {
      el.style.display = el.style.display === "none" ? "block" : "none";
    }
  }
</script>